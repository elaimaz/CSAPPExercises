Exercise 6.45
==============

### ***Dificulty***: :star: :star: :star:    

---

### ***Expected time***: ***2h*** :hourglass_flowing_sand:

---

### ***Question***:
Download the mountain program from the CS:APP2 Web site and run it on your favorite PC/Linux system. Use the results to estimate the sizes of the caches on your system.  

---  

### ***Answear***:  

Running the [mountain.c](./mountain/mountain.c) program i had these values:

Clock frequency is approx. 2904.0 MHz  

Memory mountain (MB/sec)
| Working Set | s1    | s3    | s5    | s7    | s9    | s11   | s13   | s15   | s17   | s19   | s21   | s23   | s25   | s27   | s29   | s31   |
| :---------- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| **128m**    | 6305  | 4721  | 3368  | 2665  | 2150  | 1778  | 1479  | 1267  | 1121  | 1028  | 1003  | 962   | 922   | 893   | 868   | 854   |
| **64m**     | 6498  | 4714  | 3410  | 2668  | 2132  | 1758  | 1491  | 1264  | 1112  | 1045  | 991   | 955   | 918   | 887   | 862   | 846   |
| **32m**     | 6526  | 4671  | 3426  | 2638  | 2143  | 1727  | 1454  | 1264  | 1107  | 1039  | 992   | 931   | 918   | 880   | 847   | 829   |
| **16m**     | 6567  | 4758  | 3447  | 2667  | 2067  | 1753  | 1458  | 1307  | 1108  | 1084  | 1038  | 988   | 952   | 927   | 896   | 878   |
| **8m**      | 6531  | 4888  | 3680  | 2958  | 2513  | 2105  | 1793  | 1563  | 1293  | 1316  | 1259  | 1180  | 1174  | 1130  | 1076  | 1138  |
| **4m**      | 6516  | 4531  | 3627  | 4850  | 4062  | 3432  | 2630  | 2333  | 2271  | 2313  | 2353  | 2357  | 2362  | 2454  | 2432  | 2498  |
| **2m**      | 8155  | 8138  | 7613  | 7535  | 5801  | 5628  | 4929  | 4355  | 3866  | 3704  | 3684  | 3585  | 3489  | 3402  | 3344  | 3263  |
| **1024k**   | 8197  | 8203  | 8189  | 7738  | 6675  | 5715  | 4938  | 4382  | 4003  | 3827  | 3686  | 3580  | 3486  | 3411  | 3363  | 3279  |
| **512k**    | 8203  | 8192  | 8208  | 7760  | 6815  | 5873  | 5115  | 4508  | 4142  | 4005  | 3866  | 3768  | 3734  | 3670  | 3635  | 3660  |
| **256k**    | 8168  | 8176  | 8277  | 8132  | 7534  | 6981  | 6308  | 5684  | 5415  | 5449  | 5407  | 5573  | 5532  | 5830  | 5779  | 5829  |
| **128k**    | 8224  | 7863  | 8262  | 8240  | 8368  | 8332  | 8387  | 7570  | 6240  | 6404  | 5995  | 5933  | 5967  | 5768  | 5882  | 5703  |
| **64k**     | 6610  | 6586  | 6568  | 6493  | 6504  | 6346  | 6401  | 6162  | 6107  | 6012  | 6097  | 6013  | 6219  | 6108  | 6160  | 5943  |
| **32k**     | 6591  | 6564  | 6576  | 6476  | 6442  | 6420  | 6375  | 6267  | 6338  | 6321  | 6318  | 6352  | 6247  | 6148  | 6094  | 6042  |
| **16k**     | 6563  | 6564  | 6441  | 6453  | 6406  | 6322  | 6255  | 6182  | 6053  | 6061  | 5853  | 5891  | 5747  | 5659  | 5687  | 5596  |
| **8k**      | 6621  | 6493  | 6130  | 6155  | 5952  | 5952  | 5771  | 5623  | 5587  | 5349  | 5056  | 5680  | 4998  | 5000  | 5571  | 5324  |
| **4k**      | 6482  | 6282  | 6067  | 5720  | 5506  | 5716  | 4999  | 5321  | 5050  | 5247  | 5393  | 5680  | 4687  | 4819  | 5055  | 5399  |
| **2k**      | 6430  | 5741  | 5256  | 5108  | 5191  | 4910  | 5181  | 5129  | 4411  | 4257  | 3807  | 3858  | 3675  | 3960  | 4066  | 3616  |
| **1k**      | 6221  | 5027  | 5151  | 4988  | 4688  | 3858  | 4045  | 4488  | 3707  | 3275  | 2788  | 3117  | 2420  | 3358  | 2989  | 2662  |  

My processor is a Intel® Core™ i7-7500U. The official site says that tha cache size is 4 MB Intel® Smart Cache. The official site does not bring detailed cache information about L1, L2 and L3 cache.

We can see that L3 cache is 4MB by looking at the line 4m from memory moutain table, there we can see that the speed greatly fell.  

L1 cahce we see that is probably between 1k and 2k. Looking speacially at strides S29 and S31 we can see that the speed greatly fell in 2k.  

As for L2, this is kind tricky, looking in stride s31 we see a read speed fall between 128k and 512k

